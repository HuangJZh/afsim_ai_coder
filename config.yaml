# config.yaml
system:
  name: "AFSIM RAG 代码生成系统"
  version: "1.0.0"
  debug: true
  log_level: "INFO"

model:
  path: "D:/HuangJZh/Qwen/Qwen3-4B"
  embedding_model: "BAAI/bge-small-zh-v1.5"
  device: "auto"  # auto, cuda, cpu
  quantization: "4bit"  # 4bit, 8bit, none
  
  # 生成参数
  max_tokens: 1024
  temperature: 0.3
  top_p: 0.9
  top_k: 50
  repetition_penalty: 1.1
  do_sample: true
  
  # 模型加载参数
  torch_dtype: "float16"  # float16, float32, bfloat16
  trust_remote_code: true

rag:
  # 向量数据库配置
  chroma_db_path: "./chroma_db"
  collection_name: "afsim_tutorials"
  
  # 文档处理配置
  docs_folder: "tutorials"
  chunk_size: 350
  chunk_overlap: 100
  smart_chunking: true
  semantic_threshold: 0.8
  
  # 检索配置
  search_top_k: 5
  rerank_top_k: 3
  score_threshold: 0.5
  
  # 批处理配置
  batch_size: 2000
  embedding_batch_size: 32

web:
  # Web界面配置
  server_name: "0.0.0.0"
  server_port: 7860
  share: false
  debug: true
  theme: "soft"
  
  # 界面配置
  chat_height: 500
  max_history: 20
  auto_scroll: true

paths:
  # 路径配置
  tutorials_dir: "tutorials"
  chroma_db_dir: "./chroma_db"
  logs_dir: "./logs"
  exports_dir: "./exports"
  cache_dir: "./cache"

performance:
  # 性能配置
  use_cache: true
  cache_ttl: 3600  # 秒
  max_concurrent: 4
  memory_limit: "4GB"  # 内存限制

logging:
  # 日志配置
  level: "INFO"
  format: "[{time:YYYY-MM-DD HH:mm:ss}] {level} | {message}"
  file: "afsim_rag.log"
  max_size: "10MB"
  backup_count: 5